Файлы в каталоге mapsources являются источником сведений о карте и содержат параметры и функции, нужные для получения тайлов и обслуживания кеша соответствующей карты.
Имя файла состоит из названия карты и расширения .php
Название карты - это имя каталога с кешем карты.
Файл источника прямо включается в выполняемую программу, поэтому соблюдение синтаксиса строго обязательно.
В файле-источнике ничего не является обязательным. Вместо отсутствующих значений будут применены умолчальные.

$ttl = 86400*30*12*3; //cache timeout in seconds время, через которое тайл считается протухшим, 3 года.
$ttl = 0; //cache timeout in seconds время, через которое тайл считается протухшим, никогда
$ext = 'png'; 	// tile image type/extension
$ContentType = 'image/jpeg'; 	// if content type differ then file extension
$EPSG=3395; 	// проекция карты. Обязательно, если используется веб-интерфейс и это не "Меркатор на сфере" aka EPSG:3395. Веб-интерфейсом поддерживается только "Меркатор на эллипсоиде" aka EPSG:4326. Указанная проекция никак не влияет на работу кэша, и клиентские приложения должны сами знать, в какой проекции тайлы.
$on403 = 'wait'; 	// что делать, если Forbidden: skip, wait. По умолчанию - wait, источник будет забанен на время $noInternetTimeout (params.php). 'skip' - эквивалентно отсутствию файла, будет сохранён и показан пустой тайл, скачивание продолжится.
//	 /НЕТ РЕАЛИЗОВАНО!!! $on404 = 'skip'; 	// что делать, если Not Found: skip, wait, done. По умолчанию - 'skip' - эквивалентно отсутствию файла, будет сохранён и показан пустой тайл, скачивание продолжится. 'wait', источник будет забанен на время $noInternetTimeout (params.php). 'done' - неудачное скачивание, будет показано 404, ничего не сохранено, тайл снова поставлен в очередь на скачивание.
$trash = array(); 	// crc32 хеши тайлов, которые не надо сохранять: логотипы, пустые тайлы, тайлы с дурацкими надписями
$minZoom = 0;
$maxZoom = 19;
$functionGetURL = <<<'EOFU' 	// строка с функцией формирования запроса на получение тайлов.
EOFU;
Оборачивание функции в строку сделано потому, что для загрузчика в очередь могут быть поставлены файлы заданий для разных источников карт, и в loaderSched.php файлы источников загружаются (include) в цикле. Поскольку переопределить функцию в php нельзя, функция получения url вообще не определяется в файле источника.

Функция  формирования запроса на получение тайлов должна называться getURL
function getURL($z,$x,$y) {}
Она получает номер тайла в обычном порядке $zoom - z компонента, $xtile - x компонента и $ytile - y компонента: getURL($zoom,$xtile,$ytile)
Она возвращает либо строку - uri запроса на получение указанного тайла, либо массив из двух элементов:
строка - uri запроса на получение указанного тайла, и массив параметров для функции  stream_context_create()
В функции можно использовать полезные процедуры из fcommon.php
Также в функции можно указать собственный proxy для этого источника:
$opts['http']=array(
			'proxy'=>'tcp://127.0.0.1:8123',
			'request_fulluri'=>TRUE
			);
Этот proxy будет применяться с этим источником всегда - при наличии или отсутствии глобального proxy.
